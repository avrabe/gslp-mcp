package adas:control@0.1.0;

/// Simplified control interface for ADAS systems
interface control {
    /// Control command to vehicle actuators
    record control-command {
        steering-angle: f32,
        throttle: f32,
        brake: f32,
        timestamp: u64,
    }

    /// Control system status
    enum control-status {
        offline,
        standby,
        active,
        emergency,
        error,
    }

    /// Initialize control system
    initialize: func() -> result<_, string>;

    /// Execute control commands
    execute-control: func(steering: f32, throttle: f32, brake: f32) -> result<_, string>;

    /// Emergency stop command
    emergency-stop: func() -> result<_, string>;

    /// Get current control status
    get-status: func() -> control-status;

    /// Get last executed command
    get-last-command: func() -> option<control-command>;
}

world control-component {
    export control;
}