package adas:perception@0.1.0;

/// Simplified perception interface for ADAS systems
interface perception {
    /// Object types that can be detected
    enum object-type {
        vehicle,
        pedestrian,
        cyclist,
        traffic-sign,
        obstacle,
    }

    /// Detection result from perception system
    record detection {
        object-type: object-type,
        confidence: f32,
        x: f32,
        y: f32,
        width: f32,
        height: f32,
    }

    /// Scene understanding summary
    record scene-understanding {
        timestamp: u64,
        num-vehicles: u32,
        num-pedestrians: u32,
        num-obstacles: u32,
        road-clear: bool,
    }

    /// Initialize perception system
    initialize: func() -> result<_, string>;

    /// Process camera data and return detections
    process-camera-data: func() -> result<list<detection>, string>;

    /// Process LiDAR data and return detections
    process-lidar-data: func() -> result<list<detection>, string>;

    /// Get high-level scene understanding
    get-scene-understanding: func() -> result<scene-understanding, string>;

    /// Check if perception system is initialized
    is-initialized: func() -> bool;
}

world perception-component {
    export perception;
}